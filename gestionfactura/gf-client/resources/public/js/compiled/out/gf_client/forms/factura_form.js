// Compiled by ClojureScript 1.7.107 {}
goog.provide('gf_client.forms.factura_form');
goog.require('cljs.core');
goog.require('reforms.validation');
goog.require('reforms.core');
goog.require('gf_client.components.lists_tables');
goog.require('reagent.core');
goog.require('gf_client.api');
goog.require('reforms.reagent');
gf_client.forms.factura_form.factura = reagent.core.atom.call(null,new cljs.core.PersistentArrayMap(null, 8, [new cljs.core.Keyword(null,"cuit","cuit",950748679),"",new cljs.core.Keyword(null,"type-clase-factura","type-clase-factura",-712860815),"",new cljs.core.Keyword(null,"type-impuesto","type-impuesto",1817594684),"",new cljs.core.Keyword(null,"tipo-factura","tipo-factura",-1082208495),"",new cljs.core.Keyword(null,"cae","cae",-164086308),"",new cljs.core.Keyword(null,"fecha-vencimiento-CAE","fecha-vencimiento-CAE",462200538),"",new cljs.core.Keyword(null,"cai","cai",-772598861),"",new cljs.core.Keyword(null,"fecha-vencimiento-CAI","fecha-vencimiento-CAI",2123297592),""], null));
gf_client.forms.factura_form.detalle_factura = reagent.core.atom.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"cantidad","cantidad",-99126213),(0),new cljs.core.Keyword(null,"codigo","codigo",-1240468462),"",new cljs.core.Keyword(null,"detalle","detalle",1623743275),"",new cljs.core.Keyword(null,"precioUnitario","precioUnitario",-43739037),(0)], null));
gf_client.forms.factura_form.ui_state = reagent.core.atom.call(null,cljs.core.PersistentArrayMap.EMPTY);
/**
 * Aca se deben definir los mensajes correspondientes a las validaciones realizadas sobre los campos del formulario
 */
gf_client.forms.factura_form.validar_factura = new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tipo-factura","tipo-factura",-1082208495)], null),"Debe seleccionar el tipo de factura que va a procesar."),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cuit","cuit",950748679)], null),"Debe ingresar el numero de CUIT para poder continuar"),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"type-clase-factura","type-clase-factura",-712860815)], null),"Debera seleccionar el Tipo de Factura."),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"type-impuesto","type-impuesto",1817594684)], null),"Debe indicar el % del impuesto."),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cae","cae",-164086308)], null),"Indique el CAE"),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"fecha-vencimiento-CAE","fecha-vencimiento-CAE",462200538)], null),"Indique la fecha de vencimiento del CAE Informado."),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cai","cai",-772598861)], null),"Indique el CAI"),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"fecha-vencimiento-CAI","fecha-vencimiento-CAI",2123297592)], null),"Indique la fecha de vencimiento del CAI Informado.")], null);
/**
 * Aca se deben definir los mensajes correspondientes a las validaciones realizadas sobre los campos del formulario
 */
gf_client.forms.factura_form.validar_detalle_factura = new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cantidad","cantidad",-99126213)], null),"Debe ingresar la cantidad de unidades a facturar"),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"codigo","codigo",-1240468462)], null),"Debera ingresar el codigo del item a facturar."),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"detalle","detalle",1623743275)], null),"Debera ingresar el detalle del item a facturar."),reforms.validation.present.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"precioUnitario","precioUnitario",-43739037)], null),"Debera ingresar el importe por unidad del item cargado")], null);
gf_client.forms.factura_form.enviar_formulario_BANG_ = (function gf_client$forms$factura_form$enviar_formulario_BANG_(factura,detalle_factura,ui_state){
if(cljs.core.truth_(cljs.core.apply.call(null,reforms.validation.validate_BANG_,factura,ui_state,gf_client.forms.factura_form.validar_factura))){
cljs.core.swap_BANG_.call(null,factura,(function (xs1){
return cljs.core.conj.call(null,xs1,factura);
}));

alert("CUIT -->",new cljs.core.Keyword(null,"cuit","cuit",950748679).cljs$core$IFn$_invoke$arity$1(factura));
} else {
}

if(cljs.core.truth_(cljs.core.apply.call(null,reforms.validation.validate_BANG_,detalle_factura,ui_state,gf_client.forms.factura_form.validar_detalle_factura))){
cljs.core.swap_BANG_.call(null,detalle_factura,(function (xs2){
return cljs.core.conj.call(null,xs2,detalle_factura);
}));

return alert("CODIGO -->",new cljs.core.Keyword(null,"codigo","codigo",-1240468462).cljs$core$IFn$_invoke$arity$1(detalle_factura));
} else {
return null;
}
});
gf_client.forms.factura_form.error_submit_BANG_ = (function gf_client$forms$factura_form$error_submit_BANG_(factura,ui_state){
return reforms.validation.validate_BANG_.call(null,factura,ui_state,reforms.validation.force_error.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"server-error","server-error",-426815993)], null),"Ocurrio un error, por favor vuelva a itentarlo"));
});
gf_client.forms.factura_form.datos_header_factura = (function gf_client$forms$factura_form$datos_header_factura(factura){
return reforms.core.panel.call(null,"Datos de la Factura",new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-5","div.col-md-5",1167007965),reforms.validation.select.call(null,"Canal de Factura",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"tipo-factura","tipo-factura",-1082208495)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"electronica","electronica",-371385902),"ELECTRONICA"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"fisica","fisica",301566033),"FISICA"], null)], null)),reforms.validation.text.call(null,"CUIT",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cuit","cuit",950748679)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Ingrese su numero de CUIT"),reforms.validation.select.call(null,"Factura Tipo ",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"type-clase-factura","type-clase-factura",-712860815)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"factura-A","factura-A",-1746094482),"A"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"factura-B","factura-B",1261994966),"B"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"factura-C","factura-C",217032599),"C"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"factura-NC","factura-NC",-1920530057),"Nota de Credito"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"factura-ND","factura-ND",-501720268),"Nota de Debito"], null)], null)),reforms.validation.select.call(null,"Impuesto a Aplicar",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"type-impuesto","type-impuesto",1817594684)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"impuesto-21","impuesto-21",1387932985),"21 %"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"impuesto-15","impuesto-15",2124585866),"15 %"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"impuesto-10","impuesto-10",1024268662),"10 %"], null)], null))], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-5","div.col-md-5",1167007965),reforms.validation.text.call(null,"CAE",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cae","cae",-164086308)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Ingrese su numero de CAE"),reforms.validation.date.call(null,"Fecha de Vencimiento CAE",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"fecha-vencimiento-CAE","fecha-vencimiento-CAE",462200538)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Fecha de vencimiento de su CAE"),reforms.validation.text.call(null,"CAI",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cai","cai",-772598861)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Ingrese su numero de CAI"),reforms.validation.date.call(null,"Fecha de Vencimiento CAI",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"fecha-vencimiento-CAI","fecha-vencimiento-CAI",2123297592)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Fecha de vencimiento de su CAI")], null));
});
gf_client.forms.factura_form.agregar_BANG_ = (function gf_client$forms$factura_form$agregar_BANG_(detalle_factura){
return alert(cljs.core.deref.call(null,detalle_factura));
});
gf_client.forms.factura_form.datos_detalle_factura = (function gf_client$forms$factura_form$datos_detalle_factura(detalle_factura){
return reforms.core.panel.call(null,"Detalle de la Factura",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-1","div.col-md-1",45581582),reforms.validation.number.call(null,"Cantidad",detalle_factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"cantidad","cantidad",-99126213)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"#")], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-2","div.col-md-2",-138798418),reforms.validation.text.call(null,"Codigo",detalle_factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"codigo","codigo",-1240468462)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Codigo")], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-3","div.col-md-3",1386112129),reforms.validation.text.call(null,"Detalle",detalle_factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"detalle","detalle",1623743275)], null),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),"Concepto")], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-2","div.col-md-2",-138798418),reforms.validation.number.call(null,"Precio Unitario",detalle_factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"precioUnitario","precioUnitario",-43739037)], null),"Precio Unitario")], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-2","div.col-md-2",-138798418),reforms.validation.number.call(null,"Total",detalle_factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"totalConcepto","totalConcepto",-2479778)], null),"Precio Total por Concepto")], null),reforms.core.form_buttons.call(null,reforms.core.button_primary.call(null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"btn btn-info"], null),"Agregar Detalle",(function (){
return gf_client.forms.factura_form.agregar_BANG_.call(null,detalle_factura);
}))));
});
gf_client.forms.factura_form.montos_factura = (function gf_client$forms$factura_form$montos_factura(factura){
return reforms.core.panel.call(null,"Monto de la Factura",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-5","div.col-md-5",1167007965),reforms.validation.number.call(null,"Importe Total Sin Impuesto",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"total-siva","total-siva",-1155856997)], null),"Monto Sin IVA")], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.col-md-5","div.col-md-5",1167007965),reforms.validation.number.call(null,"Importe Total Con Impuesto",factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"total-civa","total-civa",-1202044120)], null),"Monto Con IVA")], null));
});
gf_client.forms.factura_form.seccion_notas_factura = (function gf_client$forms$factura_form$seccion_notas_factura(factura){
return reforms.core.panel.call(null,"Notas Asociadas",reforms.core.textarea.call(null,factura,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"notas","notas",-1616381812)], null),"Notas de la Factura"));
});
gf_client.forms.factura_form.formulario_factura = (function gf_client$forms$factura_form$formulario_factura(){
return reforms.core.panel.call(null,"Formulario para Carga de Factura",(function (){
if(cljs.core.truth_(reforms.binding.core.valid_QMARK_.call(null,gf_client.forms.factura_form.ui_state))){
} else {
throw (new Error([cljs.core.str("Assert failed: "),cljs.core.str("The first argument to reforms.validation/form before optional attributes must be a valid binding target."),cljs.core.str("\n"),cljs.core.str(cljs.core.pr_str.call(null,cljs.core.list(new cljs.core.Symbol("reforms.binding.core","valid?","reforms.binding.core/valid?",-1432752474,null),new cljs.core.Symbol(null,"ui-state","ui-state",-2007503418,null))))].join('')));
}

return reforms.core.form.call(null,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-submit","on-submit",1227871159),(function (){
return gf_client.forms.factura_form.enviar_formulario_BANG_.call(null,gf_client.forms.factura_form.factura,gf_client.forms.factura_form.detalle_factura,gf_client.forms.factura_form.ui_state);
})], null),reforms.validation.validating_fields_fn.call(null,reforms.validation.validation_errors.call(null,gf_client.forms.factura_form.ui_state),(function (){
return gf_client.forms.factura_form.datos_header_factura.call(null,gf_client.forms.factura_form.factura);
}),(function (){
return gf_client.forms.factura_form.datos_detalle_factura.call(null,gf_client.forms.factura_form.detalle_factura);
}),(function (){
return gf_client.forms.factura_form.montos_factura.call(null,gf_client.forms.factura_form.factura);
}),(function (){
return gf_client.forms.factura_form.seccion_notas_factura.call(null,gf_client.forms.factura_form.factura);
}),(function (){
return reforms.core.button_primary.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"class","class",-2030961996),"btn btn-info",new cljs.core.Keyword(null,"align","align",1964212802),"center"], null),"ENVIAR FACTURA",(function (){
return gf_client.forms.factura_form.enviar_formulario_BANG_.call(null,gf_client.forms.factura_form.factura,gf_client.forms.factura_form.detalle_factura,gf_client.forms.factura_form.ui_state);
}));
})));
})()
);
});

//# sourceMappingURL=factura_form.js.map?rel=1472152822559